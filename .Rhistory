library(stringr)
#SCRIPT VARIABLES
url <- "https://www.drugshortagescanada.ca/?short=50"
tableID <- "drug-shortage-reports"
html <- read_html(url)
cssSelector <- paste("#",tableID," thead tr th", sep = "")
getTableHeader <- function(html){
html %>%
html_nodes(cssSelector) %>%
html_text() %>%
str_trim() %>%
unlist()
}
getTableData <- function(html){
html %>%
html_nodes(cssSelector) %>%
html_text() %>%
str_trim() %>%
unlist()
}
tableHeader <- getTableHeader(html)
colCount <- length(tableHeader)
tableData <- getTableData(html)
rowCount <- length(tableData)/colCount
rowCount
df <- data.frame(matrix(ncol = colCount, nrow= rowCount))
colnames(df) <- tableHeader
for(n in 1:7) {
df[,n] <- tableData[seq(n,length(tableData),colCount)]
}
df
# install.packages("rvest")
# install.packages("stringr")
library(rvest)
library(stringr)
#SCRIPT VARIABLES
url <- "https://www.drugshortagescanada.ca/?short=50"
tableID <- "drug-shortage-reports"
html <- read_html(url)
cssSelector <- paste("#",tableID," thead tr th", sep = "")
getTableHeader <- function(html){
html %>%
html_nodes(cssSelector) %>%
html_text() %>%
str_trim() %>%
unlist()
}
getTableData <- function(html){
html %>%
html_nodes(cssSelector) %>%
html_text() %>%
str_trim() %>%
unlist()
}
tableHeader <- getTableHeader(html)
colCount <- length(tableHeader)
tableData <- getTableData(html)
rowCount <- length(tableData)/colCount
rowCount
df <- data.frame(matrix(ncol = colCount, nrow= rowCount))
colnames(df) <- tableHeader
for(n in 1:7) {
df[,n] <- tableData[seq(n,length(tableData),colCount)]
}
df
# install.packages("rvest")
# install.packages("stringr")
library(rvest)
library(stringr)
#SCRIPT VARIABLES
url <- "https://www.drugshortagescanada.ca/?short=50"
tableID <- "drug-shortage-reports"
html <- read_html(url)
cssSelectoHead <- paste("#",tableID," thead tr th", sep = "")
cssSelectoBody <- paste("#",tableID," tbody tr tr", sep = "")
getTableHeader <- function(html){
html %>%
html_nodes(getTableHeader) %>%
html_text() %>%
str_trim() %>%
unlist()
}
getTableData <- function(html){
html %>%
html_nodes(cssSelectoBody) %>%
html_text() %>%
str_trim() %>%
unlist()
}
tableHeader <- getTableHeader(html)
colCount <- length(tableHeader)
tableData <- getTableData(html)
rowCount <- length(tableData)/colCount
rowCount
df <- data.frame(matrix(ncol = colCount, nrow= rowCount))
colnames(df) <- tableHeader
for(n in 1:7) {
df[,n] <- tableData[seq(n,length(tableData),colCount)]
}
df
for(n in 1:7) {
df[,n] <- tableData[seq(n,length(tableData),colCount)]
}
# install.packages("rvest")
# install.packages("stringr")
library(rvest)
library(stringr)
#SCRIPT VARIABLES
url <- "https://www.drugshortagescanada.ca/?short=50"
tableID <- "drug-shortage-reports"
html <- read_html(url)
cssSelectoHead <- paste("#",tableID," thead tr th", sep = "")
cssSelectoBody <- paste("#",tableID," tbody tr tr", sep = "")
getTableHeader <- function(html){
html %>%
html_nodes(getTableHeader) %>%
html_text() %>%
str_trim() %>%
unlist()
}
getTableData <- function(html){
html %>%
html_nodes(cssSelectoBody) %>%
html_text() %>%
str_trim() %>%
unlist()
}
tableHeader <- getTableHeader(html)
colCount <- length(tableHeader)
tableData <- getTableData(html)
rowCount <- length(tableData)/colCount
rowCount
df <- data.frame(matrix(ncol = colCount, nrow= rowCount))
colnames(df) <- tableHeader
for(n in 1:7) {
df[,n] <- tableData[seq(n,length(tableData),7)]
}
df
# install.packages("rvest")
# install.packages("stringr")
library(rvest)
library(stringr)
#SCRIPT VARIABLES
url <- "https://www.drugshortagescanada.ca/?short=50"
tableID <- "drug-shortage-reports"
html <- read_html(url)
cssSelectoHead <- paste("#",tableID," thead tr th", sep = "")
cssSelectoBody <- paste("#",tableID," tbody tr tr", sep = "")
getTableHeader <- function(html){
html %>%
html_nodes(getTableHeader) %>%
html_text() %>%
str_trim() %>%
unlist()
}
getTableData <- function(html){
html %>%
html_nodes(cssSelectoBody) %>%
html_text() %>%
str_trim() %>%
unlist()
}
tableHeader <- getTableHeader(html)
colCount <- length(tableHeader)
tableData <- getTableData(html)
rowCount <- length(tableData)/colCount
rowCount
df <- data.frame(matrix(ncol = colCount, nrow= rowCount))
colnames(df) <- tableHeader
for(n in 1:7) {
df[,n] <- tableData[seq(1,length(tableData),7)]
}
df
df <- data.frame(matrix(ncol = colCount, nrow= rowCount))
colnames(df) <- tableHeader
colCount <- length(tableHeader)
colCount
rowCount
rowCount
cssSelectoBody <- paste("#",tableID," tbody tr td", sep = "")
# install.packages("rvest")
# install.packages("stringr")
library(rvest)
library(stringr)
#SCRIPT VARIABLES
url <- "https://www.drugshortagescanada.ca/?short=50"
tableID <- "drug-shortage-reports"
html <- read_html(url)
cssSelectoHead <- paste("#",tableID," thead tr th", sep = "")
cssSelectoBody <- paste("#",tableID," tbody tr td", sep = "")
getTableHeader <- function(html){
html %>%
html_nodes(getTableHeader) %>%
html_text() %>%
str_trim() %>%
unlist()
}
getTableData <- function(html){
html %>%
html_nodes(cssSelectoBody) %>%
html_text() %>%
str_trim() %>%
unlist()
}
tableHeader <- getTableHeader(html)
colCount <- length(tableHeader)
tableData <- getTableData(html)
rowCount <- length(tableData)/colCount
rowCount
df <- data.frame(matrix(ncol = colCount, nrow= rowCount))
colnames(df) <- tableHeader
for(n in 1:7) {
df[,n] <- tableData[seq(n,length(tableData),colCount)]
}
df
getwd()
# install.packages("rvest")
# install.packages("stringr")
library(rvest)
library(stringr)
#SCRIPT VARIABLES
url <- "https://www.drugshortagescanada.ca/?short=50"
tableID <- "drug-shortage-reports"
html <- read_html(url)
cssSelectoHead <- paste("#",tableID," thead tr th", sep = "")
cssSelectoBody <- paste("#",tableID," tbody tr td", sep = "")
getTableHeader <- function(html){
html %>%
html_nodes(getTableHeader) %>%
html_text() %>%
str_trim() %>%
unlist()
}
getTableData <- function(html){
html %>%
html_nodes(cssSelectoBody) %>%
html_text() %>%
str_trim() %>%
unlist()
}
tableHeader <- getTableHeader(html)
colCount <- length(tableHeader)
tableData <- getTableData(html)
rowCount <- length(tableData)/colCount
rowCount
dataTable <- data.frame(matrix(ncol = colCount, nrow= rowCount))
colnames(dataTable) <- tableHeader
for(n in 1:7) {
dataTable[,n] <- tableData[seq(n,length(tableData),colCount)]
}
dataTable
# install.packages("rvest")
# install.packages("stringr")
library(rvest)
library(stringr)
#SCRIPT VARIABLES
# Provide URL -
url <- "https://www.drugshortagescanada.ca/?short=50"
# Provide Table ID -
tableID <- "drug-shortage-reports"
# Provide output Filename -
outputFileName<- "drug-shortage.csv"
html <- read_html(url)
cssSelectoHead <- paste("#",tableID," thead tr th", sep = "")
cssSelectoBody <- paste("#",tableID," tbody tr td", sep = "")
getTableHeader <- function(html){
html %>%
html_nodes(getTableHeader) %>%
html_text() %>%
str_trim() %>%
unlist()
}
getTableData <- function(html){
html %>%
html_nodes(cssSelectoBody) %>%
html_text() %>%
str_trim() %>%
unlist()
}
tableHeader <- getTableHeader(html)
colCount <- length(tableHeader)
tableData <- getTableData(html)
rowCount <- length(tableData)/colCount
rowCount
dataTable <- data.frame(matrix(ncol = colCount, nrow= rowCount))
colnames(dataTable) <- tableHeader
for(n in 1:7) {
dataTable[,n] <- tableData[seq(n,length(tableData),colCount)]
}
write.csv(dataTable,file="drug-shortage.csv", row.names = FALSE)
# install.packages("rvest")
# install.packages("stringr")
library(rvest)
library(stringr)
#SCRIPT VARIABLES
# Provide URL -
url <- "https://www.drugshortagescanada.ca/?short=50"
# Provide Table ID -
tableID <- "drug-shortage-reports"
# Provide output Filename -
outputFileName<- "drug-shortage.csv"
html <- read_html(url)
cssSelectoHead <- paste("#",tableID," thead tr th", sep = "")
cssSelectoBody <- paste("#",tableID," tbody tr td", sep = "")
getTableHeader <- function(html){
html %>%
html_nodes(getTableHeader) %>%
html_text() %>%
str_trim() %>%
unlist()
}
getTableData <- function(html){
html %>%
html_nodes(cssSelectoBody) %>%
html_text() %>%
str_trim() %>%
unlist()
}
tableHeader <- getTableHeader(html)
colCount <- length(tableHeader)
tableData <- getTableData(html)
rowCount <- length(tableData)/colCount
rowCount
dataTable <- data.frame(matrix(ncol = colCount, nrow= rowCount))
colnames(dataTable) <- tableHeader
for(n in 1:7) {
dataTable[,n] <- tableData[seq(n,length(tableData),colCount)]
}
write.csv(dataTable,file=outputFileName, row.names = FALSE)
# install.packages("rvest")
# install.packages("stringr")
library(rvest)
library(stringr)
#SCRIPT VARIABLES
# Provide URL -
url <- "https://www.drugshortagescanada.ca/?short=50"
# Provide Table ID -
tableID <- "drug-shortage-reports"
# Provide output Filename -
outputFileName<- "drug-shortage.csv"
html <- read_html(url)
cssSelectoHead <- paste("#",tableID," thead tr th", sep = "")
cssSelectoBody <- paste("#",tableID," tbody tr td", sep = "")
getTableHeader <- function(html){
html %>%
html_nodes(getTableHeader) %>%
html_text() %>%
str_trim() %>%
unlist()
}
getTableData <- function(html){
html %>%
html_nodes(cssSelectoBody) %>%
html_text() %>%
str_trim() %>%
unlist()
}
tableHeader <- getTableHeader(html)
colCount <- length(tableHeader)
tableData <- getTableData(html)
rowCount <- length(tableData)/colCount
rowCount
dataTable <- data.frame(matrix(ncol = colCount, nrow= rowCount))
colnames(dataTable) <- tableHeader
for(n in 1:7) {
dataTable[,n] <- tableData[seq(n,length(tableData),colCount)]
}
write.csv(dataTable,file=outputFileName, row.names = FALSE)
# install.packages("rvest")
# install.packages("stringr")
library(rvest)
library(stringr)
#SCRIPT VARIABLES
# Provide URL -
url <- "https://www.drugshortagescanada.ca/?short=50"
# Provide Table ID -
tableID <- "drug-shortage-reports"
# Provide output Filename -
outputFileName<- "drug-shortage.csv"
html <- read_html(url)
cssSelectoHead <- paste("#",tableID," thead tr th", sep = "")
cssSelectoBody <- paste("#",tableID," tbody tr td", sep = "")
getTableHeader <- function(html){
html %>%
html_nodes(cssSelectoHead) %>%
html_text() %>%
str_trim() %>%
unlist()
}
getTableData <- function(html){
html %>%
html_nodes(cssSelectoBody) %>%
html_text() %>%
str_trim() %>%
unlist()
}
tableHeader <- getTableHeader(html)
colCount <- length(tableHeader)
tableData <- getTableData(html)
rowCount <- length(tableData)/colCount
rowCount
dataTable <- data.frame(matrix(ncol = colCount, nrow= rowCount))
colnames(dataTable) <- tableHeader
for(n in 1:7) {
dataTable[,n] <- tableData[seq(n,length(tableData),colCount)]
}
write.csv(dataTable,file=outputFileName, row.names = FALSE)
# install.packages("rvest")
# install.packages("stringr")
library(rvest)
library(stringr)
#SCRIPT VARIABLES
# Provide URL -
url <- "https://www.drugshortagescanada.ca/?short=50"
# Provide Table ID -
tableID <- "drug-shortage-reports"
# Provide output Filename -
outputFileName<- "drug-shortage.csv"
html <- read_html(url)
cssSelectoHead <- paste("#",tableID," thead tr th", sep = "")
cssSelectoBody <- paste("#",tableID," tbody tr td", sep = "")
getTableHeader <- function(html){
html %>%
html_nodes(cssSelectoHead) %>%
html_text() %>%
str_trim() %>%
unlist()
}
getTableData <- function(html){
html %>%
html_nodes(cssSelectoBody) %>%
html_text() %>%
str_trim() %>%
unlist()
}
tableHeader <- getTableHeader(html)
colCount <- length(tableHeader)
tableData <- getTableData(html)
rowCount <- length(tableData)/colCount
rowCount
dataTable <- data.frame(matrix(ncol = colCount, nrow= rowCount))
colnames(dataTable) <- tableHeader
for(n in 1:7) {
dataTable[,n] <- tableData[seq(n,length(tableData),colCount)]
}
write.csv(dataTable,file=outputFileName, row.names = FALSE)
for(n in 1:colCount) {
dataTable[,n] <- tableData[seq(n,length(tableData),colCount)]
}
dataTable
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
setwd('..')
library(devtools)
library(devtools)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
install.packages("rstudioapi")
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
setwd('..')
library(devtools)
install.packages("rstudioapi")
install.packages("devtools")
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
setwd('..')
library(devtools)
devtools::install_github('kunal15abc/ezscrape')
install.packages("rvest")
install.packages("stringi")
# install.packages("stringi")
# install.packages("rvest")
install.packages("stringr")
library(rvest)
library(stringr)
library(stringi)
devtools::install_github('kunal15abc/ezscrape')
install.packages("dplyr")
devtools::install_github('kunal15abc/ezscrape')
url2 <- "https://www.ashp.org/drug-shortages/current-shortages/Drug-Shortage-Detail.aspx?id=332"
html2 <- read_html(url2)
listData <- getElementText(html2,"div div span h3 span")
library(ezscrape)
listData <- getElementText(html2,"div div span h3 span")
listData
length(listData)
df2 <- data.frame(matrix(ncol = length(listData)))
colnames(df2) <- listData
df2
n = c(2, 3, 5)
s =  c("aa",  "bb",  "cc",  "dd", "ee" )
b = c(TRUE,  FALSE,  TRUE,  FALSE,  FALSE )
x = list( n, s, b, 3)    # x contains copies of n, s, b
x
chtml <- read_html('yaozh.htm')
ctbl <- getReportTable(chtml,1)
ctbl %>% str
ctbl
string <- '<U+1042><U+1040>'
ctbl <- cat(stri_unescape_unicode(gsub("<U\\+(....)>", "\\\\u\\1", string)))
ctbl
devtools::use_package("rvest")
getwd()
setwd("./ezscape")
setwd("../ezscrape")
getwd()
devtools::use_package("rvest")
getwd()
getwd()
devtools::use_package("rvest")
getwd()
devtools::use_package("rvest")
devtools::use_package("rvest")
devtools::use_package("dplyr")
